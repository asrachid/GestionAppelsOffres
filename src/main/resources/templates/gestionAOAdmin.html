<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorator="templateAdmin">
	<head>
	
		<meta charset="utf-8">
		<title>Gestion appels d'offres-Admin</title>

	    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	</head>
	<body>
		<div layout:fragment="content">	
			<div class="panel panel-light">
				<div class="panel-body">	
					<nav aria-label="breadcrumb">
  						<ol class="breadcrumb">
    						<li class="breadcrumb-item active" aria-current="page"><a th:href="@{/portailAdmin}">Dashboard</a></li>
    						<li class="breadcrumb-item active" aria-current="page">Appels d'offres</li>
  						</ol>
					</nav>
					
					<form th:action="@{/gestionAOAdmin/{email}(email=${admin.email})}" th:object="${selectedSecteur}" method="get">
							<div style="margin-top:10px;">
								<div class="form-row">
									<div class="form-group">
											<label>Choisir un secteur : </label>
											<select th:field="*{secteurAO}" class="form-control" >
												<option class="btn btn-link" th:each="option : ${listSecteurs}" 
												        th:value="${option}" 
												        th:text="${option}">Options</option>
											</select>
									</div>
									<div class="form-group ">
										<button type="submit" class="btn btn-warning">valider</button>
									</div>
								</div>
							</div>
					</form>
					
					<table class="table table-hover" style="margin-top:30px;" th:if="${selectedSecteur.secteurAO}">
						<thead>
							<tr>
								<th scope="col">Objet</th>
								<th scope="col">Categorie</th>
								<th scope="col">Dossier de consultation</th>
								<th scope="col">Date limite remise plis</th>
								<th scope="col">Date d'execution</th>
								<th scope="col">Lieu d'execution</th>
								<th scope="col">Date de sortie</th>
								<th scope="col">Actions</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="ao:${listAOSecteur}">
							    <td th:text="${ao.objetAO}">Objet</td>
								<td th:text="${ao.categorieAO}">Categorie</td>
								<td><a th:href="@{'/downloadDoc/'+${ao.codeAO}}">[[${ao.dossierConsultationAO}]]</a></td>
								<td th:text="${ao.dateLimiteRemisePlis}">Date limite remise plis</td>
								<td th:text="${ao.dateExecution}">Date d'execution</td>
								<td th:text="${ao.lieuExecution}">Lieu d'execution</td>
								<td th:text="${ao.dateAO}">Date de sortie</td>
								<td>
									<a th:href="@{/deleteAOAdmin/{codeAO}&{id}(codeAO=${ao.codeAO},id=${admin.id})}">Delete</a>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</body>
</html>